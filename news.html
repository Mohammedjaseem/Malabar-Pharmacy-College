<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="MCP Malabar College of Pharmacy - Latest news and updates."
    />
    <meta
      name="keywords"
      content="MCP, Malabar, College, Pharmacy, News, Updates"
    />

    <title>MCP - News & Updates</title>

    <link rel="icon" type="image/x-icon" href="assets/img/logo/logo.png" />

    <link rel="stylesheet" href="assets/css/bootstrap.min.css" />
    <link rel="stylesheet" href="assets/css/all-fontawesome.min.css" />
    <link rel="stylesheet" href="assets/css/animate.min.css" />
    <link rel="stylesheet" href="assets/css/magnific-popup.min.css" />
    <link rel="stylesheet" href="assets/css/owl.carousel.min.css" />
    <link rel="stylesheet" href="assets/css/style.css" />
    <style>
      .news-card {
        transition: all 0.3s ease;
        height: 100%;
      }
      .news-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
      }
      .news-img {
        height: 200px;
        object-fit: cover;
        width: 100%;
      }
      .news-date {
        font-size: 14px;
        color: #6c757d;
      }
      .news-content {
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
        text-overflow: ellipsis;
      }
      .loading-spinner {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 200px;
      }
      .spinner {
        width: 40px;
        height: 40px;
        border: 4px solid rgba(0, 0, 0, 0.1);
        border-radius: 50%;
        border-top-color: #125875;
        animation: spin 1s ease-in-out infinite;
      }
      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }
    </style>
  </head>
  <body>
    <div class="preloader">
      <div class="loader-book">
        <div class="loader-book-page"></div>
        <div class="loader-book-page"></div>
        <div class="loader-book-page"></div>
      </div>
    </div>

    <header class="header">
      <div class="header-top">
        <div class="container">
          <div class="header-top-wrapper">
            <div class="header-top-left">
              <div class="header-top-contact">
                <ul>
                  <li>
                    <div class="header-top-contact-icon">
                      <img src="assets/img/icon/mail.svg" alt="Mail Icon" />
                    </div>
                    <div class="header-top-contact-info">
                      <h6>Mail Us</h6>
                      <a href="mailto:mcp@macity.edu.in">mcp@macity.edu.in</a>
                    </div>
                  </li>
                  <li>
                    <div class="header-top-contact-icon">
                      <img src="assets/img/icon/call.svg" alt />
                    </div>
                    <div class="header-top-contact-info">
                      <h6>Call Now</h6>
                      <a href="tel:+917034555559">+91 7034555559</a>
                    </div>
                  </li>
                </ul>
              </div>
            </div>
            <div class="header-top-right">
              <div class="header-top-social">
                <span>Follow Us: </span>
                <a href="http://www.facebook.com/MalabarCollegeofPharmacy"
                  ><i class="fab fa-facebook-f"></i
                ></a>
                <a href="http://www.instagram.com/malabar_college_of_pharmacy"
                  ><i class="fab fa-instagram"></i
                ></a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="main-navigation">
        <nav class="navbar navbar-expand-lg">
          <div class="container position-relative">
            <a class="navbar-brand" href="/">
              <img src="assets/img/logo/logo.png" alt="logo" class="mcp_logo" />
            </a>
            <div class="mobile-menu-right">
              <button
                class="navbar-toggler"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#main_nav"
                aria-expanded="false"
                aria-label="Toggle navigation"
              >
                <span class="navbar-toggler-mobile-icon"
                  ><i class="far fa-bars"></i
                ></span>
              </button>
            </div>
            <div class="collapse navbar-collapse" id="main_nav">
              <ul class="navbar-nav">
                <li class="nav-item dropdown">
                  <a class="nav-link active" href="/">Home</a>
                </li>
                <li class="nav-item dropdown">
                  <a class="nav-link" href="/about-us.html">About Us</a>
                </li>
                <li class="nav-item dropdown">
                  <a
                    class="nav-link dropdown-toggle active"
                    href=""
                    data-bs-toggle="dropdown"
                    >Admission</a
                  >
                  <ul class="dropdown-menu fade-down">
                    <li>
                      <a
                        class="dropdown-item"
                        href="/prospectus2024.html"
                        target="_blank"
                        rel="noopener noreferrer"
                        >Prospects</a
                      >
                    </li>
                  </ul>
                </li>
                <li class="nav-item dropdown">
                  <a class="nav-link" href="/#courses">Courses</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="contact.html">Contact</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="/careers.html">Careers</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="/gallery.html">Gallery</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link active" href="/news.html">News</a>
                </li>
              </ul>
              <div class="nav-right">
                <div class="nav-right-btn mt-2">
                  <a href="login.html" class="theme-btn"
                    ><span class="fal fa-pencil"></span>Apply Now</a
                  >
                </div>
              </div>
            </div>
          </div>
        </nav>
      </div>
    </header>

    <div class="search-popup">
      <button class="close-search"><span class="far fa-times"></span></button>
      <form action="#">
        <div class="form-group">
          <input
            type="search"
            name="search-field"
            placeholder="Search Here..."
            required
          />
          <button type="submit"><i class="far fa-search"></i></button>
        </div>
      </form>
    </div>

    <main class="main">
      <div
        class="site-breadcrumb"
        style="background: url(assets/img/breadcrumb/01.jpg)"
      >
        <div class="container">
          <h2 class="breadcrumb-title">News & Updates</h2>
          <ul class="breadcrumb-menu">
            <li><a href="index-2.html">Home</a></li>
            <li class="active">News & Updates</li>
          </ul>
        </div>
      </div>

      <div class="news-area py-120">
        <div class="container">
          <div class="row">
            <div class="col-lg-6 mx-auto">
              <div class="site-heading text-center">
                <span class="site-title-tagline"
                  ><i class="far fa-book-open-reader"></i> Latest Updates</span
                >
                <h2 class="site-title">College <span>News</span></h2>
                <p>
                  Stay updated with the latest happenings, events, and
                  announcements from Malabar College of Pharmacy.
                </p>
              </div>
            </div>
          </div>

          <div class="row" id="news-container">
            <!-- News items will be loaded here -->
            <div class="loading-spinner">
              <div class="spinner"></div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <footer class="footer-area">
      <div class="footer-shape">
        <img src="assets/img/logo/logo.png" alt="" class="footer-logo" />
      </div>
      <div class="footer-widget">
        <div class="container">
          <div class="row footer-widget-wrapper pt-100 pb-70">
            <div class="col-md-6 col-lg-4">
              <div class="footer-widget-box about-us">
                <h4 class="footer-widget-title">Contact Us</h4>
                <ul class="footer-contact">
                  <li>
                    <a href="tel:+917034555559"
                      ><i class="far fa-phone"></i>+91 7034555559</a
                    >
                  </li>
                  <li>
                    <i class="far fa-map-marker-alt"></i>Manoor - Chekanoor
                    Road, Manoor, Edappal,<br />
                    Malappuram, Kerala 679578
                  </li>
                  <li>
                    <a href="mailto:mcp@macity.edu.in">
                      <i class="far fa-envelope"></i>mcp@macity.edu.in
                    </a>
                  </li>
                </ul>
              </div>
            </div>
            <div class="col-md-6 col-lg-2">
              <div class="footer-widget-box list">
                <h4 class="footer-widget-title">Quick Links</h4>
                <ul class="footer-list">
                  <li>
                    <a href="/about-us.html"
                      ><i class="fas fa-caret-right"></i> About Us</a
                    >
                  </li>
                  <li>
                    <a href="/#testimonial"
                      ><i class="fas fa-caret-right"></i> Testimonials</a
                    >
                  </li>
                </ul>
              </div>
            </div>
            <div class="col-md-6 col-lg-3">
              <div class="footer-widget-box list">
                <h4 class="footer-widget-title">Newsletter</h4>
                <div class="footer-newsletter">
                  <p>Subscribe Our Newsletter To Get Latest Update And News</p>
                  <div class="subscribe-form">
                    <form action="#">
                      <input
                        type="email"
                        class="form-control"
                        placeholder="Your Email"
                      />
                      <button class="theme-btn" type="submit">
                        Subscribe Now <i class="far fa-paper-plane"></i>
                      </button>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="copyright">
        <div class="container">
          <div class="copyright-wrapper">
            <div class="row">
              <div class="col-md-6 align-self-center">
                <span>Last updated on 06-06-2025</span>
                <p class="copyright-text">
                  &copy; Copyright <span id="date"></span>
                  <a href="https://connect.edentu.com/">Edentu Pvt Ltd</a> All
                  Rights Reserved.
                </p>
              </div>
              <div class="col-md-6 align-self-center">
                <ul class="footer-social">
                  <li>
                    <a href="https://www.facebook.com/MalabarCollegeofPharmacy"
                      ><i class="fab fa-facebook-f"></i
                    ></a>
                  </li>
                  <li>
                    <a
                      href="http://www.instagram.com/malabar_college_of_pharmacy"
                      ><i class="fab fa-instagram"></i
                    ></a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </footer>

    <a href="#" id="scroll-top"><i class="far fa-arrow-up-from-arc"></i></a>

    <script
      data-cfasync="false"
      src="https://live.themewild.com/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"
    ></script>
    <script src="assets/js/jquery-3.7.1.min.js"></script>
    <script src="assets/js/modernizr.min.js"></script>
    <script src="assets/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/imagesloaded.pkgd.min.js"></script>
    <script src="assets/js/jquery.magnific-popup.min.js"></script>
    <script src="assets/js/isotope.pkgd.min.js"></script>
    <script src="assets/js/jquery.appear.min.js"></script>
    <script src="assets/js/jquery.easing.min.js"></script>
    <script src="assets/js/owl.carousel.min.js"></script>
    <script src="assets/js/counter-up.js"></script>
    <script src="assets/js/wow.min.js"></script>
    <script src="assets/js/main.js"></script>

    <script>
      $(document).ready(function () {
        // Function to format date
        function formatDate(dateString) {
          const options = { year: "numeric", month: "long", day: "numeric" };
          return new Date(dateString).toLocaleDateString("en-US", options);
        }

        // Function to load news
        function loadNews() {
          const newsContainer = $("#news-container");
          newsContainer.html(
            '<div class="loading-spinner"><div class="spinner"></div></div>'
          );

          // Make API request
          $.ajax({
            url: "https://conext.in/news/api/get_org_news_articles/8/",
            method: "GET",
            dataType: "json",
            success: function (response) {
              if (
                response.results &&
                response.results.data &&
                response.results.data.length > 0
              ) {
                const newsItems = response.results.data;
                let html = "";

                newsItems.forEach((news) => {
                  const bannerImage =
                    news.news_banner ||
                    news.picture ||
                    "assets/img/news-placeholder.jpg";
                  const truncatedContent = news.content
                    ? news.content.replace(/<[^>]*>/g, "").substring(0, 150) +
                      "..."
                    : "";

                  html += `
                    <div class="col-md-6 col-lg-4 mb-4">
                      <div class="card news-card h-100">
                        <img src="${bannerImage}" class="card-img-top news-img" alt="${
                    news.subject
                  }" 
                             onerror="this.src='assets/img/news-placeholder.jpg'">
                        <div class="card-body">
                          <span class="news-date">${formatDate(
                            news.date
                          )}</span>
                          <h5 class="card-title mt-2">${news.subject}</h5>
                          <p class="card-text news-content">${truncatedContent}</p>
                        </div>
                        <div class="card-footer bg-transparent border-top-0">
                          <a href="#" class="btn btn-primary read-more-btn" data-id="${
                            news.id
                          }">Read More</a>
                        </div>
                      </div>
                    </div>
                  `;
                });

                newsContainer.html(html);

                // Add click handler for read more buttons
                $(".read-more-btn").click(function (e) {
                  e.preventDefault();
                  const newsId = $(this).data("id");
                  const newsItem = newsItems.find((item) => item.id == newsId);
                  showNewsModal(newsItem);
                });
              } else {
                newsContainer.html(
                  '<div class="col-12 text-center py-5"><h4>No news available at the moment. Please check back later.</h4></div>'
                );
              }
            },
            error: function (xhr, status, error) {
              newsContainer.html(
                '<div class="col-12 text-center py-5"><h4>Failed to load news. Please try again later.</h4></div>'
              );
              console.error("Error loading news:", error);
            },
          });
        }

        // Function to show news modal
        function showNewsModal(newsItem) {
          const bannerImage =
            newsItem.news_banner ||
            newsItem.picture ||
            "assets/img/news-placeholder.jpg";
          const formattedDate = formatDate(newsItem.date);

          const modalHtml = `
            <div class="modal fade" id="newsModal" tabindex="-1" aria-labelledby="newsModalLabel" aria-hidden="true">
              <div class="modal-dialog modal-lg modal-dialog-centered">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="newsModalLabel">${
                      newsItem.subject
                    }</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body">
                    <img src="${bannerImage}" class="img-fluid mb-3" alt="${
            newsItem.subject
          }"
                         onerror="this.src='assets/img/news-placeholder.jpg'">
                    <div class="d-flex justify-content-between mb-3">
                      <span><strong>Date:</strong> ${formattedDate}</span>
                      <span><strong>Posted By:</strong> ${
                        newsItem.added_by_name || "Admin"
                      }</span>
                    </div>
                    <div class="news-content">
                      ${newsItem.content || "No content available."}
                    </div>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                  </div>
                </div>
              </div>
            </div>
          `;

          // Remove existing modal if any
          $("#newsModal").remove();

          // Append new modal to body and show it
          $("body").append(modalHtml);
          const newsModal = new bootstrap.Modal(
            document.getElementById("newsModal")
          );
          newsModal.show();
        }

        // Load news when page is ready
        loadNews();

        // Update copyright year
        $("#date").text(new Date().getFullYear());
      });
    </script>
  </body>
</html>
